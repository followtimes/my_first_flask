/*! 
 * jQuery Bootgrid v0.9.7 - 07/01/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-bootgrid.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a,b){if("object"==typeof a)for(var c in a){if(null==b)return{key:c,value:a[c]};if(b===a[c])return{key:c,value:a[c]}}throw new Error("Is not a dictionary!")}function d(a){return a.data(w)}function e(b,c){return a.extend({},b.cachedParams,{ctx:c||{}})}function f(b,c){var d={current:c.current,rowCount:c.rowCount,sort:c.sort},e=b.post;return e=a.isFunction(e)?e():e,a.extend(!0,d,e)}function g(b){return"."+a.trim(b).replace(/\s+/gm,".")}function h(b){var c=b.url;return a.isFunction(c)?c():c}function i(c){var e=d(c);e.loading.fadeOut(300),a(b).off(w)}function j(a,b,c){k(a,b,c),m(a,b,c),l(a,b,c)}function k(b,c,d){var e=b.find("thead > tr").first(),f=!1;e.children().each(function(){var b=a(this),e=b.data("custom"),g=b.data("order"),h=b.data("sortable"),i={id:b.data("column-id"),custom:e===!0||1===e,order:f||"asc"!==g&&"desc"!==g?null:g,sortable:!(h===!1||0===h)};d.columns.push(i),null!=i.order&&(d.sort[i.id]=i.order),c.multiSort||null===i.order||(f=!0)})}function l(b,c,d){var e=f(c,d),g=h(c);if(null==g||"string"!=typeof g||0===g.length)throw new Error("Url setting must be a none empty string or a function that returns one.");b.trigger("load"+w),v(b),a.post(g,e,function(e){"string"==typeof e&&(e=a.parseJSON(e)),d.current=e.current,d.total=e.total,d.totalPages=Math.ceil(d.total/d.rowCount),o(b,c,d,e.rows),n(b,c,d),p(b,c,d),q(b,c,d),i(b),b.trigger("loaded"+w)}).fail(function(){i(b)})}function m(b,c,f){var g=d(b),h=c.css,i=c.templates;g.loading=a(c.templates.loading.resolve(e(f))),b.addClass(h.table).after(g.loading),1&c.navigation&&(g.header=a(i.header.resolve(e(f,{id:b._bgId()+"-header"}))),b.before(g.header)),2&c.navigation&&(g.footer=a(i.footer.resolve(e(f,{id:b._bgId()+"-footer"}))),b.after(g.footer)),s(b,c,f)}function n(b,f,h){if(0!==f.navigation){var i=d(b),j=f.css,k=f.templates,m=a(k.actionButton.resolve(e(h,{iconCss:j.iconRefresh,text:f.labels.refresh}))).on("click"+w,function(c){c.preventDefault();var d=a(this);h.current=1,l(b,f,h),d.trigger("blur")}),n=a(k.actions.resolve(e(h))).append(m),o=g(j.actions);if("object"==typeof f.rowCount){var p=c(f.rowCount,h.rowCount).key,q=a(k.actionDropDown.resolve(e(h,{text:p})));a.each(f.rowCount,function(c,d){var i=a(k.actionDropDownItem.resolve(e(h,{buttonCss:j.dropDownItemButton,key:c,uri:"#"+d})))._bgSelectAria(c===p);i.find(g(j.dropDownItemButton)).on("click"+w,function(c){c.preventDefault();var d=a(this);d.text()!==p&&(h.current=1,h.rowCount=+d.attr("href").substr(1),l(b,f,h)),d.trigger("blur")}),q.find(g(j.dropDownMenu)).append(i)}),n.append(q)}u(f,i.header.find(o),n,1),u(f,i.footer.find(o),n,2)}}function o(b,c,d,f){var g=c.templates,h=b.children("tbody").first().empty();f.length>0?a.each(f,function(c,f){var i=a(g.row);a.each(d.columns,function(c,h){if(h.custom)b.trigger("custom"+w,{cell:a(g.cell.resolve(e(d,{content:"&nbsp;"}))).appendTo(i),column:h,row:f});else{var j=f[h.id];i.append(g.cell.resolve(e(d,{content:null==j||""===j?"&nbsp;":j})))}}),h.append(i)}):h.append(g.noResults.resolve(e(d,{columns:d.columns.length,text:c.labels.noResults})))}function p(b,c,f){if(0!==c.navigation){var h=d(b),i=f.current*f.rowCount,j=a(c.templates.infos.resolve(e(f,{end:0===f.total||-1===i||i>f.total?f.total:i,start:0===f.total?0:i-f.rowCount+1,total:f.total}))),k=g(c.css.infos);u(c,h.header.find(k),j,1),u(c,h.footer.find(k),j,2)}}function q(b,c,f){if(0!==c.navigation){var h=d(b),i=g(c.css.pagination),j=h.header.find(i)._bgShowAria(-1!==f.rowCount),k=h.footer.find(i)._bgShowAria(-1!==f.rowCount);if(-1===f.rowCount)return;var l=c.templates,m=f.current,n=f.totalPages,o=a(l.pagination.resolve(e(f))),p=n-m,q=-1*(c.padding-m),s=p>=c.padding?Math.max(q,1):Math.max(q-c.padding+p,1),t=2*c.padding+1,v=n>=t?t:n;r(b,c,f,o,"first","&laquo;","first")._bgEnableAria(m>1),r(b,c,f,o,"prev","&lt;","prev")._bgEnableAria(m>1);for(var w=0;v>w;w++){var x=w+s;r(b,c,f,o,x,x,"page-"+x)._bgEnableAria()._bgSelectAria(x===m)}0===v&&r(b,c,f,o,1,1,"page-1")._bgEnableAria(!1)._bgSelectAria(),r(b,c,f,o,"next","&gt;","next")._bgEnableAria(n>m),r(b,c,f,o,"last","&raquo;","last")._bgEnableAria(n>m),u(c,j,o,1),u(c,k,o,2)}}function r(b,c,d,f,h,i,j){var k=c.templates,m=c.css,n=e(d,{css:j,text:i,uri:"#"+h}),o=a(k.paginationItem.resolve(n)).addClass(m);return o.find(g(m.paginationButton)).on("click"+w,function(e){e.preventDefault();var f=a(this),g=f.parent();if(!g.hasClass("active")&&!g.hasClass("disabled")){var h={first:1,prev:d.current-1,next:d.current+1,last:d.totalPages},i=f.attr("href").substr(1);d.current=h[i]||+i,l(b,c,d)}f.trigger("blur")}),f.append(o),o}function s(b,c,d){var f=b.find("thead > tr > th"),h=c.css,i=c.templates;a.each(d.columns,function(j,k){var m=f.eq(j);if(k.sortable){var n=d.sort[k.id],o=n&&"asc"===n?h.iconUp:n&&"desc"===n?h.iconDown:"",p=t(c,d,m,i.icon.resolve(e(d,{iconCss:o})),!0);p.on("click"+w,function(e){e.preventDefault();var i=a(this),j=d.sort[k.id],m=i.find(g(h.icon));c.multiSort||(f.find(g(h.icon)).removeClass(h.iconDown+" "+h.iconUp),d.sort={}),j&&"asc"===j?(d.sort[k.id]="desc",m.removeClass(h.iconUp).addClass(h.iconDown)):j&&"desc"===j?c.multiSort?(delete d.sort[k.id],m.removeClass(h.iconDown)):(d.sort[k.id]="asc",m.removeClass(h.iconDown).addClass(h.iconUp)):(d.sort[k.id]="asc",m.addClass(h.iconUp)),l(b,c,d)})}else t(c,d,m,"",!1)})}function t(a,b,c,d,f){var h=a.css,i=a.templates;return c.html(i.headerCellContent.resolve(e(b,{content:c.html(),icon:d,sortable:f?h.sortable:""}))).children(g(h.columnHeaderAnchor)).first()}function u(b,c,d,e){b.navigation&e&&c.each(function(b,c){a(c).before(d.clone(!0)).remove()})}function v(c){var e=d(c);a(b).on("resize"+w,function(){var a=c.position();e.loading.css("left",a.left).css("top",a.top).height(c.height()).width(c.width())}).resize(),e.loading.fadeIn(300)}var w=".rs.jquery.bootgrid",x=function(b,d){this.element=a(b),this.options=a.extend(!0,{},x.defaults,this.element.data(),d);var e=this.options.rowCount;this.context={columns:[],current:1,rowCount:"object"==typeof e?c(e).value:e,sort:{},total:0,totalPages:0,cachedParams:{tpl:this.options.templates,lbl:this.options.labels,css:this.options.css,ctx:{}}}};x.defaults={navigation:3,multiSort:!1,padding:2,post:{},rowCount:{10:10,25:25,50:50,All:-1},url:"",css:{actions:"actions btn-group",columnHeaderAnchor:"column-header-anchor",columnHeaderText:"text",dropDownItemButton:"dropdown-button",dropDownMenu:"dropdown-menu pull-right",footer:"bootgrid-footer container-fluid",header:"bootgrid-header container-fluid",icon:"icon glyphicon",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconUp:"glyphicon-chevron-up",infos:"infos",loading:"bootgrid-loading",pagination:"pagination",paginationButton:"button",sortable:"sortable",table:"bootgrid-table table"},labels:{infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh"},templates:{actionButton:'<button class="btn btn-default" type="button" title="{{ctx.text}}">{{tpl.icon}}</button>',actionDropDown:'<div class="btn-group"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">{{ctx.text}} <span class="caret"></span></button><ul class="{{css.dropDownMenu}}" role="menu"></ul></div>',actionDropDownItem:'<li><a href="{{ctx.uri}}" class="{{ctx.buttonCss}}">{{ctx.key}}</a></li>',actions:'<div class="{{css.actions}}"></div>',cell:"<td>{{ctx.content}}</td>",footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"></p></div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"></p></div></div></div>',header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.actions}}"></p></div></div></div>',headerCellContent:'<a href="javascript:void(0);" class="{{css.columnHeaderAnchor}} {{ctx.sortable}}"><span class="{{css.columnHeaderText}}">{{ctx.content}}</span>{{ctx.icon}}</a>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"></span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}</div>',loading:'<div class="{{css.loading}}"><div>{{lbl.loading}}</div></div>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{ctx.text}}</td></tr>',pagination:'<ul class="{{css.pagination}}"></ul>',paginationItem:'<li class="{{ctx.css}}"><a href="{{ctx.uri}}" class="{{css.paginationButton}}">{{ctx.text}}</a></li>',row:"<tr></tr>"}},x.prototype.destroy=function(){a(b).off(w),this.element.off(w).removeData(w)},x.prototype.reload=function(){this.context.current=1,l(this.element,this.options,this.context)},x.prototype.sort=function(b){var c=b?a.extend({},b):{};return c===this.context.sort?this:(this.context.sort=c,a.each(c,function(){}),this)};var y=a.fn.bootgrid;a.fn.bootgrid=function(b){return this.each(function(){var c=a(this),d=c.data(w),e="object"==typeof b&&b;if(d||"destroy"!==b)return d||(c.data(w,d=new x(this,e)),j(d.element,d.options,d.context)),"string"==typeof b?d[b]():void 0})},a.fn.bootgrid.Constructor=x,a.fn.bootgrid.noConflict=function(){return a.fn.bootgrid=y,this},a.fn.extend({_bgAria:function(a,b){return this.attr("aria-"+a,b)},_bgRemoveAria:function(a){return this.removeAttr("aria-"+a)},_bgEnableAria:function(a){return null==a||a?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgShowAria:function(a){return null==a||a?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(a){return null==a||a?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(a){return a?this.attr("id",a):this.attr("id")}}),String.prototype.resolve||(String.prototype.resolve=function(b,c){var d=this;return a.each(b,function(b,e){if("object"==typeof e){var f=c?a.extend([],c):[];f.push(b),d=d.resolve(e,f)}else{b=c?c.join(".")+"."+b:b;var g=new RegExp("\\{\\{"+b+"\\}\\}","gm");d=d.replace(g,e)}}),d})}(jQuery,window);